<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Meter Login — SmartCity</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body { background: #f8fafc; font-family: 'Inter', sans-serif; }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-6">
  <div class="max-w-md w-full bg-white shadow-md rounded-2xl p-8">
    <h2 class="text-xl font-semibold mb-1 text-slate-800">Enter Meter Details</h2>
    <p class="text-sm text-slate-500 mb-6">Verify your meter to proceed with recharge</p>

    <form id="meterForm" class="space-y-4">
      <div>
        <label class="block text-sm font-medium text-slate-600">Meter Number</label>
        <input id="meterNo" type="text" required class="w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-teal-400" placeholder="e.g. MTR-908172">
      </div>

      <div>
        <label class="block text-sm font-medium text-slate-600">Password</label>
        <input id="meterPass" type="password" required class="w-full border rounded-lg px-3 py-2 mt-1 focus:ring-2 focus:ring-teal-400" placeholder="••••••••">
      </div>

      <div id="meterError" class="text-sm text-red-600"></div>

      <button type="submit" class="w-full py-3 bg-gradient-to-r from-teal-500 to-cyan-500 text-white rounded-lg font-semibold">Continue</button>

      <button type="button" onclick="fillDemoMeter()" class="w-full py-2 mt-2 border rounded-lg text-sm hover:bg-slate-50">Auto-fill Demo</button>
    </form>
  </div>

  <script>
    const meterForm = document.getElementById('meterForm');
    const error = document.getElementById('meterError');

    meterForm.addEventListener('submit', (e)=>{
      e.preventDefault();
      const meter = meterNo.value.trim();
      const pass = meterPass.value.trim();
      const user = JSON.parse(localStorage.getItem('sc_user') || '{}');
      if(!user || user.meter !== meter || user.password !== pass){
        error.textContent = "Incorrect meter number or password.";
        return;
      }
      localStorage.setItem('meter_verified', '1');
      window.location.href = "dashboard.html";
    });

    function fillDemoMeter(){
      const user = JSON.parse(localStorage.getItem('sc_user') || '{}');
      if(user){
        document.getElementById('meterNo').value = user.meter;
        document.getElementById('meterPass').value = user.password;
      } else {
        document.getElementById('meterNo').value = 'MTR-908172';
        document.getElementById('meterPass').value = 'pass123';
      }
    }

    if(!localStorage.getItem('sc_user')) window.location.href = "index.html";
  </script>
</body>
</html>

